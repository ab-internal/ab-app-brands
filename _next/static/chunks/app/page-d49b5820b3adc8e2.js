(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4090:(e,t,r)=>{Promise.resolve().then(r.bind(r,6712))},6712:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(5155),a=r(2115),l=r(6766);function n(){let[e,t]=a.useState(!0);a.useEffect(()=>{fetch("https://raw.githubusercontent.com/ab-internal/ab-app-brands/refs/heads/develop/data/brands.json").then(e=>{if(!e.ok)throw Error("Failed to fetch brands.json");return e.json()}).then(e=>{Array.isArray(e)&&n(e)}).catch(e=>{console.error("Error loading brands.json:",e)}).finally(()=>t(!1))},[]);let[r,n]=(0,a.useState)([]),[i,o]=(0,a.useState)({name:"",logoUrl:"",description:""}),[d,c]=(0,a.useState)(null),[p,x]=(0,a.useState)(""),h=()=>{o({name:"",logoUrl:"",description:""}),c(null),x("")},m=e=>{let{name:t,value:r}=e.target;o(e=>({...e,[t]:r}))},u=e=>{try{return new URL(e),!0}catch(e){return!1}},b=async e=>{if(e.preventDefault(),!i.name.trim())return void x("Name is required.");if(!i.logoUrl.trim()||!u(i.logoUrl))return void x("Valid Logo URL is required.");if(!i.description.trim())return void x("Description is required.");if(null!==d)n(e=>e.map(e=>e.id===d?{...e,...i}:e)),h();else{t(!0),x("");let e={...i,id:Date.now()};try{let t=await fetch("/api/brand-dispatch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,name:e.name,logoUrl:e.logoUrl,description:e.description})});if(!t.ok){let e=await t.json();throw Error("API error: ".concat(t.status," ").concat(JSON.stringify(e)))}n(t=>[...t,e]),h()}catch(e){x("Failed to persist brand to GitHub. See console for details."),console.error("API error:",e)}finally{t(!1)}}},g=e=>{let t=r.find(t=>t.id===e);t&&(o({name:t.name,logoUrl:t.logoUrl,description:t.description}),c(e),x(""))},f=e=>{n(t=>t.filter(t=>t.id!==e)),d===e&&h()};return(0,s.jsxs)("div",{className:"flex w-full max-w-5xl mx-auto gap-8",children:[(0,s.jsxs)("form",{className:"flex flex-col gap-4 w-full max-w-xs bg-white dark:bg-gray-800 shadow p-6 rounded",onSubmit:b,children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-2",children:d?"Edit Brand":"Add Brand"}),(0,s.jsxs)("label",{className:"flex flex-col gap-1",children:["Name",(0,s.jsx)("input",{name:"name",type:"text",value:i.name,onChange:m,required:!0,className:"border px-2 py-1 rounded",placeholder:"Brand Name"})]}),(0,s.jsxs)("label",{className:"flex flex-col gap-1",children:["Logo URL",(0,s.jsx)("input",{name:"logoUrl",type:"url",value:i.logoUrl,onChange:m,required:!0,pattern:"https?://.+",className:"border px-2 py-1 rounded",placeholder:"https://example.com/logo.png"})]}),(0,s.jsxs)("label",{className:"flex flex-col gap-1",children:["Description",(0,s.jsx)("textarea",{name:"description",value:i.description,onChange:m,required:!0,className:"border px-2 py-1 rounded min-h-[60px]",placeholder:"Brand Description"})]}),p&&(0,s.jsx)("div",{className:"text-red-600 text-sm",children:p}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-1 rounded hover:bg-blue-700",children:d?"Update":"Add"}),null!==d&&(0,s.jsx)("button",{type:"button",onClick:h,className:"bg-gray-400 text-white px-4 py-1 rounded hover:bg-gray-500",children:"Cancel"})]})]}),(0,s.jsxs)("div",{className:"flex-1 relative",children:[e&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-40 z-10",children:(0,s.jsx)("div",{className:"w-12 h-12 border-4 border-blue-400 border-t-transparent rounded-full animate-spin"})}),(0,s.jsxs)("table",{className:"w-full bg-white dark:bg-gray-800 shadow rounded",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100 dark:bg-gray-700",children:[(0,s.jsx)("th",{className:"p-2 text-left",children:"Logo"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Name"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Description"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:0===r.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:4,className:"text-center p-4 text-gray-500",children:"No brands yet."})}):r.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-2 border-b",children:(0,s.jsx)(l.default,{src:e.logoUrl,alt:e.name,width:32,height:32,className:"h-8 w-8 object-contain"})}),(0,s.jsx)("td",{className:"p-2 border-b font-semibold",children:e.name}),(0,s.jsx)("td",{className:"p-2 border-b",children:e.description}),(0,s.jsxs)("td",{className:"p-2 border-b flex gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>g(e.id),className:"bg-yellow-500 text-white px-2 py-1 rounded hover:bg-yellow-600",children:"Edit"}),(0,s.jsx)("button",{type:"button",onClick:()=>f(e.id),className:"bg-red-600 text-white px-2 py-1 rounded hover:bg-red-700",children:"Delete"})]})]},e.id))})]})]})]})}function i(){return(0,s.jsxs)("div",{className:"grid grid-rows-[20px_1fr_20px] items-center justify-items-center min-h-screen p-8 pb-20 gap-16 sm:p-20 font-[family-name:var(--font-geist-sans)]",children:[(0,s.jsxs)("main",{className:"flex flex-col gap-[32px] row-start-2 items-center sm:items-start",children:[(0,s.jsx)("h1",{children:"Brand Manager"}),(0,s.jsx)(n,{})]}),(0,s.jsx)("footer",{className:"row-start-3 flex gap-[24px] flex-wrap items-center justify-center",children:(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["v","0.1.0"]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[766,441,684,358],()=>t(4090)),_N_E=e.O()}]);